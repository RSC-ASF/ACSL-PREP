<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ACSL Prep - Master Computer Science Competitions</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap"
        rel="stylesheet">
</head>

<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <a href="index.html" class="nav-logo">
                <span class="logo-icon">‚óÜ</span>
                ACSL<span class="accent">Prep</span>
            </a>
            <div class="nav-menu">
                <a href="index.html" class="nav-link active">Home</a>
                <a href="pages/leaderboard.html" class="nav-link">Leaderboard</a>
                <div id="auth-nav" class="auth-nav">
                    <button id="sign-in-btn" class="btn btn-primary">Sign In</button>
                </div>
                <div id="user-nav" class="user-nav hidden">
                    <a href="pages/profile.html" class="nav-link profile-link">
                        <img id="user-avatar" src="" alt="Profile" class="user-avatar">
                        <span id="user-name"></span>
                    </a>
                    <button id="sign-out-btn" class="btn btn-secondary">Sign Out</button>
                </div>
            </div>
            <button class="nav-toggle" id="nav-toggle">
                <span></span>
                <span></span>
                <span></span>
            </button>
        </div>
    </nav>

    <div class="page-container">
        <div class="page-header">
            <div class="container">
                <h1>Contest <span class="accent">Preparation</span></h1>
                <p>Choose a contest to start your preparation journey</p>
            </div>
        </div>

        <div class="page-content">
            <div class="container">
                <div class="contest-cards">
                    <!-- Contest 1 -->
                    <div class="contest-card-full" data-contest="1">
                        <div class="contest-card-header">
                            <div class="contest-number">01</div>
                            <div class="contest-info">
                                <h2>Contest 1</h2>
                                <p class="contest-topics">Computer Number Systems ‚Ä¢ Recursive Functions ‚Ä¢ What Does This
                                    Program Do?</p>
                            </div>
                            <div class="contest-progress" id="contest1-progress">
                                <div class="progress-ring">
                                    <span class="progress-percent">0%</span>
                                </div>
                            </div>
                        </div>
                        <div class="contest-card-body">
                            <div class="problem-types">
                                <a href="pages/short-problems.html?contest=1" class="problem-type-card">
                                    <div class="type-icon">üìù</div>
                                    <div class="type-info">
                                        <h3>Short Problems</h3>
                                        <p>Quick calculation and theory questions</p>
                                        <span class="problem-count">0 / 10 completed</span>
                                    </div>
                                    <span class="type-arrow">‚Üí</span>
                                </a>
                                <a href="pages/programming.html?contest=1" class="problem-type-card">
                                    <div class="type-icon">üíª</div>
                                    <div class="type-info">
                                        <h3>Programming Problems</h3>
                                        <p>Code solutions in Python, Java, or C++</p>
                                        <span class="problem-count">0 / 5 completed</span>
                                    </div>
                                    <span class="type-arrow">‚Üí</span>
                                </a>
                            </div>
                        </div>
                    </div>

                    <!-- Contest 2 -->
                    <div class="contest-card-full" data-contest="2">
                        <div class="contest-card-header">
                            <div class="contest-number">02</div>
                            <div class="contest-info">
                                <h2>Contest 2</h2>
                                <p class="contest-topics">Prefix/Postfix/Infix Notation ‚Ä¢ Bit-String Flicking ‚Ä¢ LISP</p>
                            </div>
                            <div class="contest-progress" id="contest2-progress">
                                <div class="progress-ring">
                                    <span class="progress-percent">0%</span>
                                </div>
                            </div>
                        </div>
                        <div class="contest-card-body">
                            <div class="problem-types">
                                <a href="pages/short-problems.html?contest=2" class="problem-type-card">
                                    <div class="type-icon">üìù</div>
                                    <div class="type-info">
                                        <h3>Short Problems</h3>
                                        <p>Quick calculation and theory questions</p>
                                        <span class="problem-count">0 / 10 completed</span>
                                    </div>
                                    <span class="type-arrow">‚Üí</span>
                                </a>
                                <a href="pages/programming.html?contest=2" class="problem-type-card">
                                    <div class="type-icon">üíª</div>
                                    <div class="type-info">
                                        <h3>Programming Problems</h3>
                                        <p>Code solutions in Python, Java, or C++</p>
                                        <span class="problem-count">0 / 5 completed</span>
                                    </div>
                                    <span class="type-arrow">‚Üí</span>
                                </a>
                            </div>
                        </div>
                    </div>

                    <!-- Contest 3 -->
                    <div class="contest-card-full" data-contest="3">
                        <div class="contest-card-header">
                            <div class="contest-number">03</div>
                            <div class="contest-info">
                                <h2>Contest 3</h2>
                                <p class="contest-topics">Boolean Algebra ‚Ä¢ Data Structures ‚Ä¢ FSAs and Regular
                                    Expressions</p>
                            </div>
                            <div class="contest-progress" id="contest3-progress">
                                <div class="progress-ring">
                                    <span class="progress-percent">0%</span>
                                </div>
                            </div>
                        </div>
                        <div class="contest-card-body">
                            <div class="problem-types">
                                <a href="pages/short-problems.html?contest=3" class="problem-type-card">
                                    <div class="type-icon">üìù</div>
                                    <div class="type-info">
                                        <h3>Short Problems</h3>
                                        <p>Quick calculation and theory questions</p>
                                        <span class="problem-count">0 / 10 completed</span>
                                    </div>
                                    <span class="type-arrow">‚Üí</span>
                                </a>
                                <a href="pages/programming.html?contest=3" class="problem-type-card">
                                    <div class="type-icon">üíª</div>
                                    <div class="type-info">
                                        <h3>Programming Problems</h3>
                                        <p>Code solutions in Python, Java, or C++</p>
                                        <span class="problem-count">0 / 5 completed</span>
                                    </div>
                                    <span class="type-arrow">‚Üí</span>
                                </a>
                            </div>
                        </div>
                    </div>

                    <!-- Contest 4 -->
                    <div class="contest-card-full" data-contest="4">
                        <div class="contest-card-header">
                            <div class="contest-number">04</div>
                            <div class="contest-info">
                                <h2>Contest 4</h2>
                                <p class="contest-topics">Graph Theory ‚Ä¢ Digital Electronics ‚Ä¢ Assembly Language</p>
                            </div>
                            <div class="contest-progress" id="contest4-progress">
                                <div class="progress-ring">
                                    <span class="progress-percent">0%</span>
                                </div>
                            </div>
                        </div>
                        <div class="contest-card-body">
                            <div class="problem-types">
                                <a href="pages/short-problems.html?contest=4" class="problem-type-card">
                                    <div class="type-icon">üìù</div>
                                    <div class="type-info">
                                        <h3>Short Problems</h3>
                                        <p>Quick calculation and theory questions</p>
                                        <span class="problem-count">0 / 10 completed</span>
                                    </div>
                                    <span class="type-arrow">‚Üí</span>
                                </a>
                                <a href="pages/programming.html?contest=4" class="problem-type-card">
                                    <div class="type-icon">üíª</div>
                                    <div class="type-info">
                                        <h3>Programming Problems</h3>
                                        <p>Code solutions in Python, Java, or C++</p>
                                        <span class="problem-count">0 / 5 completed</span>
                                    </div>
                                    <span class="type-arrow">‚Üí</span>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-brand">
                    <span class="logo-icon">‚óÜ</span> ACSL<span class="accent">Prep</span>
                </div>
                <p class="footer-text">Helping students master computer science competitions.</p>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2026 ACSLPrep. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <style>
        .contest-card-full {
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-lg);
            margin-bottom: var(--spacing-xl);
            overflow: hidden;
            transition: all var(--transition-normal);
        }

        .contest-card-full:hover {
            border-color: var(--border-light);
        }

        .contest-card-header {
            display: flex;
            align-items: center;
            gap: var(--spacing-xl);
            padding: var(--spacing-xl);
            background: var(--bg-tertiary);
            border-bottom: 1px solid var(--border-color);
        }

        .contest-card-header .contest-number {
            font-size: 2.5rem;
            font-weight: 800;
            color: var(--accent);
            opacity: 0.5;
        }

        .contest-info {
            flex: 1;
        }

        .contest-info h2 {
            font-size: 1.25rem;
            margin-bottom: var(--spacing-xs);
        }

        .contest-topics {
            color: var(--text-secondary);
            font-size: 0.875rem;
        }

        .progress-ring {
            width: 60px;
            height: 60px;
            border-radius: var(--radius-full);
            border: 3px solid var(--bg-tertiary);
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
        }

        .progress-percent {
            font-size: 0.875rem;
            font-weight: 600;
            color: var(--text-secondary);
        }

        .contest-card-body {
            padding: var(--spacing-lg);
        }

        .problem-types {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: var(--spacing-md);
        }

        .problem-type-card {
            display: flex;
            align-items: center;
            gap: var(--spacing-lg);
            padding: var(--spacing-lg);
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-md);
            transition: all var(--transition-fast);
        }

        .problem-type-card:hover {
            border-color: var(--accent);
            background: var(--bg-tertiary);
        }

        .type-icon {
            font-size: 2rem;
        }

        .type-info {
            flex: 1;
        }

        .type-info h3 {
            font-size: 1rem;
            margin-bottom: var(--spacing-xs);
        }

        .type-info p {
            color: var(--text-secondary);
            font-size: 0.75rem;
            margin-bottom: var(--spacing-xs);
        }

        .problem-count {
            font-size: 0.75rem;
            color: var(--accent);
        }

        .type-arrow {
            color: var(--text-secondary);
            font-size: 1.25rem;
        }

        @media (max-width: 768px) {
            .contest-card-header {
                flex-wrap: wrap;
            }

            .contest-progress {
                width: 100%;
                display: flex;
                justify-content: center;
                margin-top: var(--spacing-md);
            }
        }
    </style>

    <!-- Firebase SDK -->
    <script type="module" src="js/firebase-config.js"></script>
    <script type="module" src="js/auth.js"></script>
    <script type="module">
        import { signInWithGoogle, handleSignOut } from './js/auth.js';
        import { auth, db, doc, getDoc } from './js/firebase-config.js';
        import { onAuthStateChanged } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js';

        // Setup navigation
        const navToggle = document.getElementById('nav-toggle');
        const navMenu = document.querySelector('.nav-menu');

        if (navToggle) {
            navToggle.addEventListener('click', () => {
                navMenu.classList.toggle('active');
            });
        }

        // Auth buttons
        document.getElementById('sign-in-btn')?.addEventListener('click', signInWithGoogle);
        document.getElementById('sign-out-btn')?.addEventListener('click', handleSignOut);

        // Load user progress
        onAuthStateChanged(auth, async (user) => {
            if (user) {
                const userDoc = await getDoc(doc(db, 'users', user.uid));
                if (userDoc.exists()) {
                    const progress = userDoc.data().progress;
                    // Update progress display for each contest
                    for (let i = 1; i <= 4; i++) {
                        const contestProgress = progress[`contest${i}`];
                        if (contestProgress) {
                            const shortCompleted = contestProgress.short?.length || 0;
                            const progCompleted = contestProgress.programming?.length || 0;
                            const total = 15; // 10 short + 5 programming
                            const percent = Math.round(((shortCompleted + progCompleted) / total) * 100);

                            const progressEl = document.querySelector(`#contest${i}-progress .progress-percent`);
                            if (progressEl) {
                                progressEl.textContent = `${percent}%`;
                            }

                            // Update problem counts
                            const card = document.querySelector(`[data-contest="${i}"]`);
                            if (card) {
                                const counts = card.querySelectorAll('.problem-count');
                                if (counts[0]) counts[0].textContent = `${shortCompleted} / 10 completed`;
                                if (counts[1]) counts[1].textContent = `${progCompleted} / 5 completed`;
                            }
                        }
                    }
                }
            }
        });
    </script>
</body>

</html>
